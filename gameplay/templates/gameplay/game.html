<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hra {{ game.id }}</title>
    <style>
        body {
    display: grid;
    place-items: center;  /* Centerin to middle */
    height: 100vh;  /* Will take entire screen from bottom */
    margin: 0;  /* remove spaces */
}
        .sudoku-grid {
            display: grid;
            place-items: center;
            grid-template-columns: repeat(9, 80px);
            grid-template-rows: repeat(9, 80px);
            gap: 2px;
        }
        .cell {
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid black;
            font-size: 18px;
            cursor: pointer;
        }
        .grid-border {
            border-right: 3px solid black;
            border-bottom: 3px solid black;
        }
        .selected {
            background-color: lightblue;
        }
    </style>
    <script>
        let selectedItem = null;

        function selectItem(itemId) {
            selectedItem = itemId;
            document.querySelectorAll('.item-btn').forEach(btn => btn.classList.remove('selected'));
            document.getElementById('item-' + itemId).classList.add('selected');
        }

        function placeItem(cellId) {
            if (!selectedItem) {
                alert("Vyber si předmět!");
                return;
            }
            fetch(`/gameplay/place/${cellId}/${selectedItem}/`, {
                method: "POST",
                headers: {
                    "X-CSRFToken": "{{ csrf_token }}",
                }
            }).then(response => {
                if (response.ok) location.reload();
            });
        }
    </script>
</head>
<body>
    <h1>Hra č. {{ game.id }}</h1>
    <p>Hráč: {{ game.player.username }}</p>

    <h2>Vyber předmět</h2>
        <div>
            {% for item in items %}
                <button id="item-{{ item.id }}" class="item-btn" onclick="selectItem({{ item.id }})">
                    {{ item.number }} - {{ item.name }}
                </button>
            {% endfor %}
        </div>

    <h2>Herní mřížka</h2>
        <div class="sudoku-grid">
            {% for cell in cells %}
                <div class="cell
                    {% if cell.column in grid_borders %} grid-border{% endif %}
                    {% if cell.row in grid_borders %} grid-border{% endif %}"
                    onclick="placeItem({{ cell.id }})">
                    {% if cell.selected_item %}
                        {{ cell.selected_item.number }} - {{ cell.selected_item.name }}
                    {% endif %}
                </div>
            {% endfor %}
        </div>

    <a href="{% url 'start_new_game' %}">Spustit novou hru</a>
</body>
</html>